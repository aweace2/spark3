import java.text.SimpleDateFormat

rootProject.name = 'data-spark-jobs'

gradle.addBuildListener(new BuildListener() {
    @Override
    void buildStarted(Gradle gradle) {
        println("====== [${now()}] buildStarted -> 开始构建")
    }

    @Override
    void settingsEvaluated(Settings settings) {
        println("====== [${now()}] settingsEvaluated -> settings.gradle中的代码执行完毕")
    }

    @Override
    void projectsLoaded(Gradle gradle) {
        println("====== [${now()}] projectsLoaded -> 项目结构加载完成（初始化阶段结束），可访问根项目：${gradle.gradle.rootProject}")
    }

    @Override
    void projectsEvaluated(Gradle gradle) {
        println("====== [${now()}] projectsEvaluated -> 所有项目评估完成（配置阶段结束）")
    }

    @Override
    void buildFinished(BuildResult buildResult) {
        println("====== [${now()}] buildFinished -> 构建结束")
    }
})

static now() {
    new SimpleDateFormat("yyyy-MM-dd HH.mm.ss.SSS").format(new Date())
}
